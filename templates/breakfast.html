
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>NYC Breakfast Explorer</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: white;
      min-height: 100vh;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .header {
      text-align: center;
      margin-bottom: 40px;
    }
    .header h1 {
      font-size: 48px;
      margin: 0 0 10px 0;
    }
    .step {
      display: none;
    }
    .step.active {
      display: block;
    }
    .location-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin: 20px 0;
    }
    .location-card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 25px;
      cursor: pointer;
      transition: all 0.3s;
      border: 2px solid transparent;
    }
    .location-card:hover {
      transform: translateY(-5px);
      border-color: #f59e0b;
      box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);
    }
    .location-card h3 {
      margin: 0 0 10px 0;
      font-size: 24px;
      color: #f59e0b;
    }
    .location-card .badge {
      display: inline-block;
      padding: 5px 15px;
      background: rgba(245, 158, 11, 0.2);
      border-radius: 20px;
      font-size: 12px;
      margin: 10px 0;
    }
    .location-card p {
      line-height: 1.6;
      color: #cbd5e1;
    }
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin: 20px 0;
    }
    .menu-item {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      padding: 20px;
    }
    .menu-item h4 {
      margin: 0 0 5px 0;
      color: #fbbf24;
    }
    .menu-item .price {
      color: #10b981;
      font-weight: bold;
      font-size: 18px;
    }
    .menu-item p {
      color: #94a3b8;
      font-size: 14px;
      margin: 10px 0;
    }
    .btn {
      background: linear-gradient(90deg, #f59e0b, #f97316);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.3s;
    }
    .btn:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(245, 158, 11, 0.4);
    }
    .btn-primary {
      background: linear-gradient(90deg, #10b981, #059669);
      width: 100%;
      margin-top: 20px;
    }
    .back-btn {
      background: transparent;
      border: 1px solid #64748b;
      color: #94a3b8;
      margin-bottom: 20px;
    }
    .back-btn:hover {
      border-color: white;
      color: white;
    }
    .order-section {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 30px;
    }
    .order-item {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 8px;
      margin: 10px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .custom-input {
      width: 100%;
      padding: 12px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid #475569;
      border-radius: 8px;
      color: white;
      font-size: 16px;
      margin: 10px 0;
    }
    .custom-input:focus {
      outline: none;
      border-color: #a855f7;
    }
    .remove-btn {
      background: #ef4444;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      cursor: pointer;
    }
    .total {
      font-size: 28px;
      text-align: right;
      margin: 20px 0;
      color: #fbbf24;
    }
    .menu-header {
      background: linear-gradient(135deg, #f59e0b, #f97316);
      padding: 30px;
      border-radius: 15px;
      text-align: center;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>NYC Breakfast Explorer</h1>
      <p>Choose your perfect morning meal</p>
    </div>

    <div class="step active" id="step1">
      <h2 style="text-align: center; margin-bottom: 30px;">Choose Your Breakfast Spot</h2>
      <div class="location-grid">
        <div class="location-card" onclick="selectLocation('sarabeths')">
          <h3>Sarabeths</h3>
          <div class="badge">Elegant & Classic</div>
          <p>üìç Upper West Side</p>
          <p>A beloved NYC institution known for its legendary homemade jams and elegant brunch classics. Perfect for a refined, upscale breakfast experience.</p>
        </div>
        <div class="location-card" onclick="selectLocation('jacks')">
          <h3>Jack's Wife Frida</h3>
          <div class="badge">Bold & Trendy</div>
          <p>üìç SoHo</p>
          <p>Mediterranean-inspired breakfast with bold Mexican flavors. A trendy spot with colorful dishes and creative twists on morning favorites.</p>
        </div>
        <div class="location-card" onclick="selectLocation('ess')">
          <h3>Ess a Bagel</h3>
          <div class="badge">Authentic & Iconic</div>
          <p>üìç Midtown East</p>
          <p>The ultimate NYC bagel experience. Hand-rolled, kettle-boiled bagels that are crispy outside and pillowy inside. A true New York classic.</p>
        </div>
        <div class="location-card" onclick="selectLocation('shuka')">
          <h3>Shuka</h3>
          <div class="badge">Fresh & Vibrant</div>
          <p>üìç East Village</p>
          <p>Modern Mediterranean cuisine with Israeli breakfast specialties. Fresh, vibrant dishes featuring tahini, hummus, and perfectly spiced shakshuka.</p>
        </div>
      </div>
    </div>

    <div class="step" id="step2">
      <button class="btn back-btn" onclick="goToStep(1)">‚Üê Back</button>
      <div class="menu-header" id="menuHeader"></div>
      <div class="menu-grid" id="menuGrid"></div>
      <button class="btn btn-primary" onclick="goToStep(3)">Continue ‚Üí</button>
    </div>

    <div class="step" id="step3">
      <button class="btn back-btn" onclick="goToStep(2)">‚Üê Back</button>
      <div class="order-section">
        <h2>Your Order</h2>
        <div id="orderList"></div>
        <h3 style="margin-top: 30px;">Add Custom Item</h3>
        <input type="text" class="custom-input" id="customInput" placeholder="E.g., Gluten-free waffle with almond butter">
        <button class="btn" onclick="addCustom()">Add Custom Item</button>
      </div>
      <button class="btn btn-primary" onclick="goToStep(4)">Review Order ‚Üí</button>
    </div>

    <div class="step" id="step4">
      <div class="order-section">
        <h2>Order Confirmation</h2>
        <div class="menu-header" id="reviewHeader"></div>
        <div id="reviewList"></div>
        <div class="total" id="totalPrice">Total: $0</div>
        <button class="btn back-btn" onclick="goToStep(3)">‚Üê Edit Order</button>
        <button class="btn btn-primary" onclick="confirm()">Confirm Order</button>
      </div>
    </div>
  </div>

  <script>
    var data = {
      sarabeths: {
        name: 'Sarabeths',
        location: 'Upper West Side',
        items: [
          {name: 'Lemon Ricotta Pancakes', price: 18, desc: 'Fluffy pancakes with fresh lemon zest'},
          {name: 'Eggs Benedict', price: 22, desc: 'Poached eggs on English muffin'},
          {name: 'French Toast', price: 16, desc: 'Challah bread with maple syrup'},
          {name: 'Fresh Squeezed OJ', price: 8, desc: 'Orange juice made to order'}
        ]
      },
      jacks: {
        name: 'Jacks Wife Frida',
        location: 'SoHo',
        items: [
          {name: 'Shakshuka', price: 19, desc: 'Poached eggs in spicy tomato sauce'},
          {name: 'Avocado Toast', price: 16, desc: 'Sourdough with smashed avocado'},
          {name: 'Mexican Omelet', price: 18, desc: 'With chorizo and peppers'},
          {name: 'Cold Brew Coffee', price: 6, desc: 'Smooth and refreshing'}
        ]
      },
      ess: {
        name: 'Ess a Bagel',
        location: 'Midtown East',
        items: [
          {name: 'Everything Bagel', price: 5, desc: 'With cream cheese'},
          {name: 'Lox and Bagel', price: 18, desc: 'Nova lox with cream cheese'},
          {name: 'Egg Sandwich', price: 12, desc: 'Fried egg and cheese'},
          {name: 'Hot Coffee', price: 3, desc: 'Fresh brewed'}
        ]
      },
      shuka: {
        name: 'Shuka',
        location: 'East Village',
        items: [
          {name: 'Israeli Breakfast', price: 22, desc: 'Eggs, hummus, tahini, salad'},
          {name: 'Halloumi Scramble', price: 19, desc: 'With grilled halloumi cheese'},
          {name: 'Quinoa Bowl', price: 17, desc: 'Roasted vegetables and egg'},
          {name: 'Turkish Coffee', price: 5, desc: 'Strong and aromatic'}
        ]
      }
    };

    var current = null;
    var cart = [];

    function goToStep(n) {
      var steps = document.querySelectorAll('.step');
      for (var i = 0; i < steps.length; i++) {
        steps[i].classList.remove('active');
      }
      document.getElementById('step' + n).classList.add('active');
      if (n === 4) showReview();
    }

    function selectLocation(id) {
      current = data[id];
      showMenu();
      goToStep(2);
    }

    function showMenu() {
      document.getElementById('menuHeader').innerHTML = '<h2>' + current.name + '</h2><p>' + current.location + '</p>';
      var html = '';
      for (var i = 0; i < current.items.length; i++) {
        var item = current.items[i];
        html += '<div class="menu-item">';
        html += '<h4>' + item.name + '</h4>';
        html += '<div class="price">$' + item.price + '</div>';
        html += '<p>' + item.desc + '</p>';
        html += '<button class="btn" onclick="addItem(' + i + ')">Add</button>';
        html += '</div>';
      }
      document.getElementById('menuGrid').innerHTML = html;
    }

    function addItem(idx) {
      cart.push({name: current.items[idx].name, price: current.items[idx].price, custom: false});
      updateOrder();
    }

    function addCustom() {
      var val = document.getElementById('customInput').value;
      if (val) {
        cart.push({name: val, price: 0, custom: true});
        document.getElementById('customInput').value = '';
        updateOrder();
      }
    }

    function removeItem(idx) {
      cart.splice(idx, 1);
      updateOrder();
    }

    function updateOrder() {
      var html = '';
      if (cart.length === 0) {
        html = '<p style="text-align: center; color: #64748b;">No items yet</p>';
      } else {
        for (var i = 0; i < cart.length; i++) {
          html += '<div class="order-item">';
          html += '<div>' + cart[i].name;
          if (cart[i].custom) html += ' <span style="background: #a855f7; padding: 2px 8px; border-radius: 4px; font-size: 12px;">Custom</span>';
          html += '</div>';
          html += '<div>';
          if (!cart[i].custom) html += '<span style="color: #fbbf24; margin-right: 15px;">$' + cart[i].price + '</span>';
          html += '<button class="remove-btn" onclick="removeItem(' + i + ')">Remove</button>';
          html += '</div></div>';
        }
      }
      document.getElementById('orderList').innerHTML = html;
    }

    function showReview() {
      document.getElementById('reviewHeader').innerHTML = '<h2>' + current.name + '</h2><p>' + current.location + '</p>';
      var html = '';
      var total = 0;
      for (var i = 0; i < cart.length; i++) {
        total += cart[i].price;
        html += '<div class="order-item">';
        html += '<div>' + cart[i].name;
        if (cart[i].custom) html += ' <span style="background: #a855f7; padding: 2px 8px; border-radius: 4px; font-size: 12px;">Custom</span>';
        html += '</div>';
        if (!cart[i].custom) html += '<div style="color: #fbbf24;">$' + cart[i].price + '</div>';
        html += '</div>';
      }
      document.getElementById('reviewList').innerHTML = html;
      document.getElementById('totalPrice').textContent = 'Total: $' + total;
    }
    function confirm() {
        // Store the order in session (optional)
        const orderData = {
            restaurant: current.name,
            items: cart,
            total: cart.reduce((sum, item) => sum + item.price, 0)
        };
        
        // Show confirmation and redirect to shopping
        alert('Order confirmed! Thank you! Taking you to shopping...');
        
        // Submit form to go to shopping page with the breakfast spot
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = "{{ url_for('complete_breakfast') }}";
        
        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = 'breakfast_spot';
        input.value = Object.keys(data).find(key => data[key].name === current.name);
        
        form.appendChild(input);
        document.body.appendChild(form);
        form.submit();
    }
  </script>

  <!-- ADD THE HIDDEN FORM HERE -->
  <form id="completeBreakfastForm" method="POST" action="{{ url_for('complete_breakfast') }}" style="display: none;">
    <input type="hidden" name="breakfast_spot" id="breakfastSpotInput">
  </form>

</body>  <!-- ‚Üê ADD THIS CLOSING BODY TAG -->
</html>  <!-- ‚Üê ADD THIS CLOSING HTML TAG -->